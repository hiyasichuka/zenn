---
title: '技術面接で聞かれる認証方式の違いを理解する'
emoji: '🔐'
type: 'tech'
topics: ['認証', 'セキュリティ', 'jwt', 'session', '面接']
published: false
---

# はじめに

技術面接で頻出する質問のひとつに **「セッション認証とトークン認証（JWT）の違い」** があります。
実務で使ったことはあっても、いざ口頭で説明しようとすると

- どこから話せばよいのか？
- それぞれの本質的な違いは何か？
- 面接官はどこを評価しているのか？

という点で詰まりがちです。

本記事では、セッション認証と JWT 認証の違いを **本質（ステート管理）から理解できるように整理** し、 面接でもそのまま話せる説明方法を整理しておきます。
今後、技術面接に臨まれる方の参考になれば幸いです。

# 1. 認証方式を分ける「本質」はどこか？

セッション認証とトークン認証（JWT）の違いは、一言でまとめると **「状態（ステート）をどこに持つか」** の違いです。

| 方式                    | 状態を保持する場所 | 特徴                       |
| ----------------------- | ------------------ | -------------------------- |
| **セッション認証**      | サーバー           | Stateful／即時無効化に強い |
| **トークン認証（JWT）** | クライアント       | Stateless／スケーラブル    |

# 2. セッション認証：サーバーが“台帳”を管理する方式

セッション認証は、古くからある最も一般的な認証方式です。  
**Stateful** であり、サーバー側が認証状態を管理します。

実際のアプリケーションでも、ほとんどの場合はこちらの方式から入ります。サーバー側で状態を集中管理できるため、ログアウト処理や強制的なセッション無効化、管理画面のアクセス制御などが直感的に扱えます。特に企業向けシステムや金融系など、確実にアクセスを止められることが求められる場面では今でもよく使われる方法です。

## 2.1 セッション認証の仕組みを一言で言うと？

> **“ホテルのクローク方式（番号札を渡す方式）”**

- サーバー：台帳（セッションストア）にユーザー情報を保存
- ブラウザ：中身のない番号（セッション ID）だけを持つ
- リクエスト時にセッション ID を送り、サーバーが台帳を参照する

## 2.2 処理フロー

1. ユーザーがログイン
2. サーバーがメモリ/DB にユーザー情報を保存（セッション作成）
3. セッション ID を発行し Cookie に入れる
4. ブラウザは次回以降 Cookie を送る
5. サーバーがセッションストアから情報を特定する

## 2.3 メリット

- **即時ログアウトが容易**（台帳から消すだけ）
- ID はただのランダム文字列なので **改ざんが困難**
- 通信量が少ない（ID のみ）

## 2.4 デメリット

- **スケールさせるのが難しい**  
  複数サーバーで共有するためには Redis などのキャッシュストアが必要
- **サーバー側のメモリ/DB を使い続ける**  
   → 大規模サービスでは負荷が増える
  また、セッション数が増えるほどストアの負荷が上がるため、可用性を保つアーキテクチャ設計（レプリケーションやフェイルオーバー）も要求され、シンプルさは徐々に失われていきます。

# 3. トークン認証（JWT）：クライアントが“証明書”を持つ方式

近年の SPA、モバイルアプリ、マイクロサービスでは、JWT 認証が主流です。  
**Stateless** な方式で、サーバーに状態を保存しません。
特に近年は API ベースのフロントエンドや複数サービス間の連携が当たり前になり、どこからアクセスしても同じように認証できる仕組みが求められます。JWT はまさにその用途に向いていて、クライアントアプリ・バックエンド・マイクロサービスが同じトークンを使ってやり取りできるという点が非常に大きな利点です。

## 3.1 トークン認証の仕組みを一言で言うと？

> **“入国パスポート方式（自分で証明書を持ち歩く）”**

- サーバー：JWT を発行するだけ（状態は持たない）
- クライアント：署名つきのトークンそのものを保存
- リクエスト時にトークンを提示し、サーバーが署名を検証する

## 3.2 JWT の構造

JWT は以下の 3 部構成です：

- `payload` は Base64 で誰でも読める（暗号化ではない）
- `signature` は秘密鍵で作成され、**改ざん検知**に利用される

## 3.3 処理フロー

1. ログイン成功
2. サーバーが JWT（署名付き）を生成
3. クライアントに渡す（Cookie / localStorage / SecureStorage）
4. リクエストごとに JWT を送る
5. サーバーは **署名検証だけ** 行って許可

## 3.4 メリット

- サーバーが状態を持たないため複雑な同期処理が不要で**スケーラブル**
- **Web / iOS / Android など横断利用に最適**
- **マイクロサービス構成と相性が良い**

## 3.5 デメリット

- **即時ログアウトが難しい**  
  トークンは期限まで“有効扱い”  
  → ブラックリスト運用や短命アクセストークン＋リフレッシュトークンが必要
- **XSS など保存場所のセキュリティを考える必要がある**
  さらに、トークンをどこに保存するか（Cookie、localStorage、SecureStorage）によって攻撃ベクターも変わるため、実装の自由度が高い一方で設計の難易度も上がります。サービス規模が大きくなるほど、このあたりの運用設計が品質に影響する場面が増えてきます。

「どちらが優れているか？」ではなく、サービスの性質や成長フェーズによって相性が変わります。
ユーザー数の規模、モバイルアプリの有無、セキュリティ要件などを踏まえて、適切な方式を選ぶことが重要です。

# 4. 両者の比較まとめ

| 観点             | セッション認証      | JWT 認証                        |
| ---------------- | ------------------- | ------------------------------- |
| 状態管理         | サーバー            | クライアント                    |
| 改ざん対策       | 不要（ID は無意味） | 署名で検知                      |
| スケーラビリティ | 中                  | 高                              |
| 即時ログアウト   | ◎                   | △（工夫必要）                   |
| モバイル対応     | △                   | ◎                               |
| 適した用途       | 金融、管理画面、EC  | SPA、SNS、API、マイクロサービス |

---

# 5. 面接での模範回答例

> 「両者の違いは **認証状態をどこに持つか** だと理解しています。
>
> セッション認証はサーバー側で状態を管理する方式で、強制ログアウトなどのセキュリティ制御が容易です。一方でサーバーが状態を持つため、スケール時にはセッション共有（Redis など）が必要になります。
>
> トークン認証は状態をクライアント側に持たせるパスポート方式で、サーバーは署名検証を行うだけのステートレスな構成が取れます。そのためスケーラビリティが高く、SPA やモバイルアプリ、マイクロサービスで広く使われています。ただし、発行済みトークンの即時無効化が難しいため、短命化やリフレッシュトークンで補う必要があります。
>
> 要件に応じて両者を使い分けるべきだと考えています。」

---

# 6. まとめ

- セッション認証とトークン認証の違いは **“状態管理の場所”**
- セッション認証は **Stateful**、トークン認証は **Stateless**
- 用途によって適材適所で選ぶ必要がある
- 面接では「仕組み」「メリデメ」「使い分け」を筋で説明できると強い

本記事が、技術面接に向けた理解整理と、日々の開発設計の参考になれば幸いです。
